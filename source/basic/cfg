{
  "variables": [
    {
      "<public_includes>": [ "include" ],
      "<private_includes>": [ "include", "header" ]
    },
    {
      "host": "windows"
    },
    {
      "host": "linux|macos"
    }
  ],
  "projects": {
    "basic": {
      "variables": [
        {
          "<name>": "basic"
        },
        {
          "host": "windows",
          "<cflags>": [ "/O2", "/W4" ],
          "<copy_includes>": [
            "copy include/*.h ../include/",
            "attrib +r ../include/*.*"
          ]
        },
        {
          "host": "linux|macos",
          "<cflags>": [ "-O2", "-Wall" ],
          "<copy_includes>": [
            "cp include/*.h ../include/",
            "chmod u-w ../include/*.*"
          ]
        }
      ],
      "dependency": [
        "::hal",
        "../basic/cfg::hal"
      ],
      "public": {
        "c": {
          "include": "<public_includes>"
        },
        "cpp": {
          "include": "<public_includes>"
        },
        "linker": {
          "static": "<name>"
        }
      },
      "private": {
        "c": {
          "flags": "<cflags>",
          "include": "<private_includes>"
        },
        "cpp": {
          "flags": "<cflags>",
          "include": "<private_includes>"
        },
        "linker": {
          "static": "<name>"
        }
      },
      "build": [
        {
          "source": [
            "./**/*.c"
          ],
          "tool": "c"
        },
        {
          "source": [
            "./**/*.c"
          ],
          "tool": "c",
          "toolset": "msvc2015"
        },
        {
          "source": [
            "./**/*.cpp"
          ],
          "tool": "cpp"
        },
        {
          "source": [
            "source/x86/*.asm"
          ],
          "target": ".*x86.*",
          "tool": "asm",
          "toolset": "yasm"
        },
        {
          "source": [
            "source/x86/*.c"
          ],
          "target": ".*x86.*",
          "tool": "c"
        },
        {
          "flags": [ "-march=armv7-a" ],
          "include": "<includes>",
          "source": [
            "source/arm/*.c"
          ],
          "target": ".*arm.*",
          "tool": "c"
        },
        {
          "input": [],
          "output": "<name>",
          "tool": "linker",
          "type": "static"
        },
        {
          "tool": "sync"
        },
        {
          "command": "<copy_includes>",
          "tool": "shell"
        }
      ]
    },
    "hal": {
      "comment": "pseudo-project",
      "dependency": [],
      "public": {
        "c": {
          "include": [
            "~/include",
            "../include"
          ]
        }
      },
      "build": []
    }
  }
}
